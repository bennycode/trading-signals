<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Simple Moving Average (SMA) Demo | Trading Signals</title>
    <meta name="description" content="Interactive demo of Simple Moving Average (SMA) with examples and visualization" />
    <link rel="stylesheet" href="../assets/style.css" />
    <script src="https://code.highcharts.com/stock/highstock.js"></script>
    <script src="https://code.highcharts.com/stock/modules/exporting.js"></script>
    <style>
        .demo-container {
            display: flex;
            min-height: 100vh;
        }
        
        .sidebar {
            width: 280px;
            background-color: var(--color-background-secondary);
            border-right: 1px solid var(--color-separator);
            padding: 20px;
            overflow-y: auto;
        }
        
        .sidebar h2 {
            margin-top: 0;
            margin-bottom: 20px;
            color: var(--color-text);
        }
        
        .category {
            margin-bottom: 30px;
        }
        
        .category h3 {
            margin: 0 0 15px 0;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--color-text-aside);
            letter-spacing: 0.5px;
        }
        
        .indicator-list {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .indicator-list li {
            margin-bottom: 8px;
        }
        
        .indicator-link {
            display: block;
            padding: 8px 12px;
            text-decoration: none;
            color: var(--color-text);
            border-radius: 4px;
            transition: background-color 0.2s;
            font-size: 14px;
        }
        
        .indicator-link:hover {
            background-color: var(--color-background);
            color: var(--color-link);
        }
        
        .indicator-link.active {
            background-color: var(--color-accent);
            color: white;
        }
        
        .main-content {
            flex: 1;
            padding: 0;
            overflow-y: auto;
        }
        
        .demo-header {
            background-color: var(--color-background);
            border-bottom: 1px solid var(--color-separator);
            padding: 20px 40px;
        }
        
        .demo-header h1 {
            margin: 0 0 10px 0;
            font-size: 28px;
        }
        
        .demo-header p {
            margin: 0;
            color: var(--color-text-aside);
            max-width: 800px;
            line-height: 1.5;
        }
        
        .demo-content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section h2 {
            margin: 0 0 20px 0;
            font-size: 20px;
            border-bottom: 1px solid var(--color-separator);
            padding-bottom: 10px;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .data-table th, .data-table td {
            padding: 8px 12px;
            text-align: right;
            border: 1px solid var(--color-separator);
        }
        
        .data-table th {
            background-color: var(--color-background-secondary);
            font-weight: 600;
        }
        
        .data-table tr:nth-child(even) {
            background-color: var(--color-background-secondary);
        }
        
        .chart-container {
            height: 400px;
            margin: 20px 0;
            border: 1px solid var(--color-separator);
            border-radius: 4px;
        }
        
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: var(--color-link);
            text-decoration: none;
            font-size: 14px;
        }
        
        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <aside class="sidebar">
            <h2>Technical Indicators</h2>
            
            <div class="category">
                <h3>Trend Indicators</h3>
                <ul class="indicator-list" id="trend-indicators"></ul>
            </div>
            
            <div class="category">
                <h3>Momentum Indicators</h3>
                <ul class="indicator-list" id="momentum-indicators"></ul>
            </div>
            
            <div class="category">
                <h3>Volatility Indicators</h3>
                <ul class="indicator-list" id="volatility-indicators"></ul>
            </div>
            
            <div class="category">
                <h3>Exhaustion Indicators</h3>
                <ul class="indicator-list" id="exhaustion-indicators"></ul>
            </div>
        </aside>
        
        <main class="main-content">
            <header class="demo-header">
                <h1>Simple Moving Average (SMA)</h1>
                <p>The Simple Moving Average (SMA) creates an average of all prices within a fixed interval. The SMA weights the prices of all periods equally which makes it not as responsive to recent prices as the EMA.</p>
            </header>
            
            <div class="demo-content">
                <a href="index.html" class="back-link">‚Üê Back to Demo Home</a>
                
                <div class="section">
                    <h2>Example Data Table</h2>
                    <p>The table below shows the input data and calculated SMA values:</p>
                    <div id="data-table-container"></div>
                </div>
                
                <div class="section">
                    <h2>Chart Visualization</h2>
                    <p>Interactive chart showing the price data and SMA indicator:</p>
                    <div id="chart-container" class="chart-container"></div>
                </div>
            </div>
        </main>
    </div>
    
    <script>
        // Sample data
        const samplePrices = [81,78,75,68,57,56,72,87,99,89,86,80,76,82,87,75,73,65,58,42,48,56,51,30,28,35,57,72,87,86,99,84,70,65,57,69,92,68];
        const sampleOHLCV = [{"open":47100.89,"high":47103.64,"low":47038.74,"close":47050.49,"volume":1000000},{"open":47063.51,"high":47150,"low":47020,"close":47120.3,"volume":1200000},{"open":47120.3,"high":47180,"low":47080,"close":47165.2,"volume":950000},{"open":47165.2,"high":47200,"low":47100,"close":47145.8,"volume":1100000},{"open":47145.8,"high":47190,"low":47120,"close":47175.9,"volume":1050000},{"open":47175.9,"high":47220,"low":47140,"close":47200.5,"volume":1300000},{"open":47200.5,"high":47250,"low":47180,"close":47230.2,"volume":980000},{"open":47230.2,"high":47280,"low":47200,"close":47260.8,"volume":1150000},{"open":47260.8,"high":47300,"low":47220,"close":47270.4,"volume":1080000},{"open":47270.4,"high":47320,"low":47240,"close":47290.6,"volume":1250000}];
        
        // Indicator configuration
        const indicatorConfig = {"interval":5};
        
        
        // Simple Moving Average calculation
        function calculateSMA(prices, interval) {
            const results = [];
            for (let i = 0; i < prices.length; i++) {
                if (i >= interval - 1) {
                    const sum = prices.slice(i - interval + 1, i + 1).reduce((a, b) => a + b, 0);
                    results.push(sum / interval);
                } else {
                    results.push(null);
                }
            }
            return results;
        }
        
        function generateDataTable() {
            const interval = indicatorConfig.interval;
            const smaResults = calculateSMA(samplePrices, interval);
            
            let tableHtml = '<table class="data-table"><thead><tr><th>Index</th><th>Input Price</th><th>SMA(' + interval + ')</th></tr></thead><tbody>';
            
            for (let i = 0; i < samplePrices.length; i++) {
                const result = smaResults[i];
                const resultStr = result !== null ? result.toFixed(2) : 'null';
                tableHtml += `<tr><td>${i + 1}</td><td>${samplePrices[i]}</td><td>${resultStr}</td></tr>`;
            }
            
            tableHtml += '</tbody></table>';
            document.getElementById('data-table-container').innerHTML = tableHtml;
        }
        
        function createChart() {
            const interval = indicatorConfig.interval;
            const smaResults = calculateSMA(samplePrices, interval);
            
            const priceData = samplePrices.map((price, i) => [i, price]);
            const smaData = smaResults.map((result, i) => result !== null ? [i, result] : null).filter(x => x !== null);
            
            Highcharts.stockChart('chart-container', {
                title: {
                    text: 'SMA(' + interval + ') Example'
                },
                legend: {
                    enabled: true
                },
                series: [{
                    name: 'Price',
                    data: priceData,
                    type: 'line',
                    color: '#2563eb'
                }, {
                    name: 'SMA(' + interval + ')',
                    data: smaData,
                    type: 'line',
                    color: '#dc2626'
                }],
                xAxis: {
                    title: {
                        text: 'Data Point'
                    }
                },
                yAxis: {
                    title: {
                        text: 'Value'
                    }
                }
            });
        }
    
        
        // Populate sidebar (same as main page)
        const indicatorData = {"categories":{"trend":"Trend Indicators","momentum":"Momentum Indicators","volatility":"Volatility Indicators","exhaustion":"Exhaustion Indicators"},"indicators":{"trend":[{"className":"ADX","fullName":"Average Directional Index (ADX)","shortName":"ADX"},{"className":"DEMA","fullName":"Double Exponential Moving Average (DEMA)","shortName":"DEMA"},{"className":"DMA","fullName":"Dual Moving Average (DMA)","shortName":"DMA"},{"className":"DX","fullName":"Directional Movement Index (DMI / DX)","shortName":"DX"},{"className":"EMA","fullName":"Exponential Moving Average (EMA)","shortName":"EMA"},{"className":"LinearRegression","fullName":"Linear Regression (LINREG)","shortName":"LINREG"},{"className":"PSAR","fullName":"Parabolic SAR (PSAR)","shortName":"PSAR"},{"className":"RMA","fullName":"Relative Moving Average (RMA)","shortName":"RMA"},{"className":"SMA","fullName":"Simple Moving Average (SMA)","shortName":"SMA"},{"className":"SMA15","fullName":"Spencer's 15-Point Moving Average","shortName":"SMA15"},{"className":"VWAP","fullName":"Volume-Weighted Average Price (VWAP)","shortName":"VWAP"},{"className":"WMA","fullName":"Weighted Moving Average (WMA)","shortName":"WMA"},{"className":"WSMA","fullName":"Wilder's Smoothed Moving Average (WSMA)","shortName":"WSMA"},{"className":"ZigZag","fullName":"ZigZag Indicator","shortName":"ZIGZAG"}],"momentum":[{"className":"AC","fullName":"Accelerator Oscillator (AC)","shortName":"AC"},{"className":"AO","fullName":"Awesome Oscillator (AO)","shortName":"AO"},{"className":"CCI","fullName":"Commodity Channel Index (CCI)","shortName":"CCI"},{"className":"CG","fullName":"Center of Gravity (CG)","shortName":"CG"},{"className":"MACD","fullName":"Moving Average Convergence Divergence (MACD)","shortName":"MACD"},{"className":"MOM","fullName":"Momentum Indicator (MOM / MTM)","shortName":"MOM"},{"className":"OBV","fullName":"On-Balance Volume (OBV)","shortName":"OBV"},{"className":"REI","fullName":"Range Expansion Index (REI)","shortName":"REI"},{"className":"ROC","fullName":"Rate Of Change Indicator (ROC)","shortName":"ROC"},{"className":"RSI","fullName":"Relative Strength Index (RSI)","shortName":"RSI"},{"className":"StochasticOscillator","fullName":"Stochastic Oscillator (STOCH)","shortName":"STOCH"},{"className":"StochasticRSI","fullName":"Stochastic RSI (STOCHRSI)","shortName":"STOCHRSI"}],"volatility":[{"className":"AccelerationBands","fullName":"Acceleration Bands (ABANDS)","shortName":"ABANDS"},{"className":"ATR","fullName":"Average True Range (ATR)","shortName":"ATR"},{"className":"BollingerBands","fullName":"Bollinger Bands (BBANDS)","shortName":"BBANDS"},{"className":"BollingerBandsWidth","fullName":"Bollinger Bands Width (BBW)","shortName":"BBW"},{"className":"IQR","fullName":"Interquartile Range (IQR)","shortName":"IQR"},{"className":"MAD","fullName":"Mean Absolute Deviation (MAD)","shortName":"MAD"},{"className":"TR","fullName":"True Range (TR)","shortName":"TR"}],"exhaustion":[{"className":"TDS","fullName":"Tom Demark's Sequential Indicator (TDS)","shortName":"TDS"}]}};
        
        function populateSidebar() {
            for (const [category, indicators] of Object.entries(indicatorData.indicators)) {
                const list = document.getElementById(`${category}-indicators`);
                indicators.forEach(indicator => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.href = `${indicator.shortName.toLowerCase()}.html`;
                    a.className = 'indicator-link';
                    a.textContent = `${indicator.shortName} - ${indicator.fullName.replace(/\s*\([^)]*\)/, '')}`;
                    
                    // Mark current indicator as active
                    if (indicator.shortName === 'SMA') {
                        a.classList.add('active');
                    }
                    
                    li.appendChild(a);
                    list.appendChild(li);
                });
            }
        }
        
        // Initialize page
        populateSidebar();
        generateDataTable();
        createChart();
    </script>
</body>
</html>